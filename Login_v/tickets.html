<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Tickets</title>
        <link rel="stylesheet" href="../style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>
<body style="background-color: var(--color2);">

    <header>
        <nav class="navbar navbar-expand-lg" style="background-color: var(--color1);">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">
                    <img src="../Img/Icon.png" alt="Logo" width="24" height="24" class="d-inline-block align-text-top">
                    Crazy Diamond
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list-ul" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
                    </svg>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="index_sign.html">Home</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link active" href="tickets.html">Tickets</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="download_sign.html">Download</a>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                              User
                            </a>
                            <ul class="dropdown-menu">
                            <li>
                                <a class="dropdown-item"><span id="timer">00:30</span></a>
                            </li>
                            <li>
                                <a class="dropdown-item" id="logout-button" href="#">Log Out</a>
                            </li>
                            </ul>
                        </li>
                    </ul>

                    <div class="ticket-info ms-auto">
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi-ticket bi-ticket-perforated-fill" viewBox="0 0 16 16">
                                <path d="M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6zm4-1v1h1v-1zm1 3v-1H4v1zm7 0v-1h-1v1zm-1-2h1v-1h-1zm-6 3H4v1h1zm7 1v-1h-1v1zm-7 1H4v1h1zm7 1v-1h-1z"/>
                            </svg>
                            <span id="ticket-count" class="count">0</span>
                        </div>
                    </div>

                </div>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            <section class="card-container">
                <div class="card-ticket">
                    <h2>
                        50 Tickets <br>
                        <span> - Low Tier - </span>
                    </h2>
                    <img class="img-tier" src="../Img/image-tier-01.jpg" alt="Tier1">
                    <p>Price 25$</p>
                    <a class="btn" href="#">.giveticketsfreeclickhere</a>
                    <div id="paypal-button-50"></div>
                </div>

                <div class="card-ticket">
                    <h2>
                        200 Tickets <br>
                        <span> - Mid Tier - </span>
                    </h2>
                    <img class="img-tier" src="../Img/image-tier-00.jpg" alt="Tier2">
                    <p>Price 150$</p>
                    <a class="btn" href="#">.giveticketsfreeclickhere</a>
                    <div id="paypal-button-200"></div>
                </div>

                <div class="card-ticket">
                    <h2>
                        2500 Tickets <br>
                        <span> - High Tier - </span>
                    </h2>
                    <img class="img-tier" src="../Img/image-tier-02.jpg" alt="Tier3">
                    <p>Price 500$</p>
                    <a class="btn" href="#">.giveticketsfreeclickhere</a>
                    <div id="paypal-button-2500"></div>
                </div>

            </section>
        </div>
    </main>

    <script src="https://sandbox.paypal.com/sdk/js?client-id=AYV9iOhJ-FSIFRYK_PMdiHKry3ulGqwAwujxpKRBL7BLvtznBWEFyRWUip9XMMaN2hARs9p1hnsLpCbD&currency=MXN&disable-funding=credit,card"></script>

    <script>
        // Función para configurar y renderizar los botones de PayPal para cada nivel de ticket
        function renderPayPalButtons(ticketAmount, price, buttonId) {
        paypal.Buttons({
            style: {
                layout: 'vertical',
                color:  'black',
                shape:  'pill',
                label:  'paypal'
            },
            createOrder: function(data, actions) {
                return actions.order.create({
                    intent: 'CAPTURE',
                    purchase_units: [{
                        amount: {
                            value: price.toFixed(2) // Precio en formato decimal
                        }
                    }]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    purchaseTickets(ticketAmount);
                    alert('Pago realizado con éxito. ¡Disfruta de tus tickets!');
                });
            },
            onCancel: function(data) {
                alert('La transacción fue cancelada. No se ha realizado ningún cargo.');
            },
            onError: function(err) {
                alert('Hubo un problema con tu pago. Por favor, inténtalo de nuevo.');
                console.error('Error en la transacción de PayPal:', err);
            }
        }).render(buttonId);
    }
    
        // Renderiza los botones de PayPal para cada opción de tickets
        // renderPayButtons(Numero de Tickets, Precio, Id_del boton);
        renderPayPalButtons(50, 1, '#paypal-button-50');
        renderPayPalButtons(200, 1, '#paypal-button-200');
        renderPayPalButtons(2500, 1, '#paypal-button-2500');
    </script>
    

    <script src="../Scripts/timer.js"></script>
    <script src="../Scripts/tickets_purchase.js"></script>
    <script src="../Scripts/logout.js"></script>

</body>
</html>